(this.webpackJsonpfactsolotl=this.webpackJsonpfactsolotl||[]).push([[0],{1:function(e,t,a){e.exports={toggleOn:"Search_toggleOn__2GMPh",clickExpand:"Search_clickExpand__1KMdK",total:"Search_total__sZChh",searchHeader:"Search_searchHeader__1E-Ce",searchFooter:"Search_searchFooter__PSsCh",toggleOff:"Search_toggleOff__3MPn4",select:"Search_select__1gg29",detailBox:"Search_detailBox__2C408",searchToggle:"Search_searchToggle__2sYVV"}},12:function(e,t,a){},13:function(e,t,a){e.exports={nav:"navbar_nav__3qFhO"}},14:function(e,t,a){e.exports={leftLogo:"Logo_leftLogo__yKmfW"}},27:function(e,t,a){e.exports={list:"List_list__2JTWI",redBG:"List_redBG__3v7Jh",greenBG:"List_greenBG__1EYTT"}},28:function(e,t,a){e.exports=a.p+"static/media/pbdw.cb4189a5.pdf"},29:function(e,t,a){e.exports={map:"Map_map__2bGnQ",mapLabel:"Map_mapLabel__2chvM"}},30:function(e,t,a){e.exports=a.p+"static/media/bubbleF.ecb67f7a.png"},31:function(e,t,a){e.exports=a(58)},36:function(e,t,a){},4:function(e,t,a){e.exports={info:"Splash_info__1nnsE",fortyTwo:"Splash_fortyTwo__1N39g",content:"Splash_content__1LjUm",content2:"Splash_content2__1daBF",title:"Splash_title__3tXU1",legend:"Splash_legend__X0Aah",highlightMap:"Splash_highlightMap__29zCB"}},56:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(26),r=a.n(c),s=(a(36),a(7)),o=a(8),i=a(10),h=a(9),u=a(11),d=a(3),m=a(5),f=a.n(m),p=a(6),g=(a(56),function(e){var t;return"Yes"===e.exceedance?t="redBG pulse btn-floating btn waves-effect waves-dark red":"No"===e.exceedance&&(t="greenBG btn-floating btn waves-effect waves-dark white"),l.a.createElement("div",null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"details"},l.a.createElement("h4",null,e.name),l.a.createElement("label",null,"  ",e.sampleLocation),l.a.createElement("div",{className:"Info"},l.a.createElement("button",{onClick:e.clicked,id:"expand",className:t},l.a.createElement("i",{id:"chevron",className:"material-icons"},"expand_more")))))))}),v=a(27),E=function(e){var t=l.a.createElement("p",{style:{textAlign:"center"}},"Something went wrong!");return t=e.queried?e.schools.map((function(t){var a=e.exceedanceCheck?"redBG":"greenBG";return console.log(t.key),l.a.createElement("div",{className:a},l.a.createElement(g,{key:t.key,name:t.school_name,district:t.district,exceedance:t.action_level_exceedance,toggleDetails:t.toggleDetails,closeDetais:t.closeDetais,sampleLocation:t.school_site_name,clicked:function(){return e.onSchoolSelect(t.id)}}))})):l.a.createElement("div",{className:"card"},l.a.createElement("h1",null,"search results")),l.a.createElement("div",{className:v.list},t)},S=a(12),b=a(28),_=a.n(b),y=function(e){var t=l.a.createElement("div",{className:"cardDetail"},l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-image"},l.a.createElement("h1",null,"school details"))));if(e.loadedSchool){var a=new Date(e.loadedSchool.sample_date),n=a.getFullYear(),c=a.getMonth()+1,r=a.getDate();t=l.a.createElement("div",{className:S.cardDetail},l.a.createElement("div",{id:"detailInset",className:"card"},l.a.createElement("button",{onClick:function(t){return e.closeDetails(t)},id:"closeBtn",className:" btn-floating btn waves-effect waves-dark white"},l.a.createElement("i",{id:"close",className:"material-icons"},"close")),l.a.createElement("h4",null,e.loadedSchool.school_name),l.a.createElement("p",null,"School district: ",e.loadedSchool.district),l.a.createElement("p",null,"Exceedance: ",e.loadedSchool.action_level_exceedance),l.a.createElement("p",null,"Lead concentration: ",e.loadedSchool.result," ppb"),l.a.createElement("p",null,"Sampled from: ",e.loadedSchool.school_site_name),l.a.createElement("p",null,"Date sampled: ",c,"/",r,"/",n),l.a.createElement("p",null,"Water system: ",e.loadedSchool.water_system_name)),l.a.createElement("p",null,"Learn more about the EPA lead rule:"),l.a.createElement("iframe",{className:S.pdf,title:"dwFacts",src:_.a,width:"100%",height:"700px"}))}return t},w=a(1),N=a(4),k=a(29),x=function(e){return l.a.createElement("div",null,l.a.createElement("div",{id:"chart_div",className:k.map}))},O=function(e){return l.a.createElement("div",{className:N.splash},l.a.createElement("div",{className:N.info},l.a.createElement("h2",{className:N.title},"Factsolotl"),l.a.createElement("p",{className:N.content},"The water quality fact finder."),l.a.createElement("h4",{className:N.content2},"Use Factsolotl to search for lead results from tap water samples taken at public schools across California from 2017 to 2019."),l.a.createElement("button",{type:"click",className:"btn waves-effect waves-light green",onClick:function(t){return e.startSearch(t)}},"Begin Search")),l.a.createElement("div",{className:N.fortyTwo},l.a.createElement("h1",null,"Don't Panic"),l.a.createElement("p",null,"Stay informed.")),l.a.createElement("div",{className:N.legend},l.a.createElement("label",null,"The ",l.a.createElement("span",{className:N.highlightMap},"map")," shows the number of samples, per county, that had a lead result greater than 15ppb."),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("label",null,"Hover over a marker for info.")),l.a.createElement(x,null))},q=a(13),j=a(30),C=a.n(j),L=a(14),B=function(){return l.a.createElement("div",{className:L.logo},l.a.createElement("a",{href:"https://www.scientificamerican.com/article/biologys-beloved-amphibian-the-axolotl-is-racing-toward-extinction1/",rel:"noopener noreferrer",target:"_blank"},l.a.createElement("img",{className:L.leftLogo,src:C.a,alt:"A pink cartoon axolotl"})))},D=function(e){var t=l.a.createElement("button",{id:"home",type:"click",className:"btn-floating btn-large waves-effect waves-light transparent",onClick:function(t){return e.startSearch(t)}},l.a.createElement("i",{className:"material-icons"},"home"));return e.searchStatus?l.a.createElement("div",{className:q.nav},l.a.createElement(B,null),t):l.a.createElement("div",{className:q.nav},l.a.createElement(B,null))},F=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={schools:[],selectedschoolId:"",error:!1,loadedSchool:null,query1:"",query2:"",query3:"",exceedance:!1,exceedanceCheck:!1,queried:!1,detailsSelected:!1,total:0,beginSearch:!1,map:!1},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"queryHandler",value:function(e){var t=this,a="https://data.ca.gov/api/3/action/datastore_search?resource_id=5ebb2d68-1186-4937-acaf-8564c9a01ed6&q="+this.state.query1+", "+this.state.query2+", "+this.state.query3,n=a+", yes";""===this.state.query1&&""===this.state.query2&&""===this.state.query3?alert("Please enter a query."):this.state.exceedance?this.state.exceedance&&f.a.get(n).then((function(a){var n=a.data.result.records,l=a.data.result.total;0===n.length&&alert("No schools matched this search");var c=n.map((function(e){return Object(d.a)({},e,{id:Object(p.v4)(),key:Object(p.v4)()})}));t.setState(Object(d.a)({},e,{schools:c,queried:!0,total:l}))})).catch((function(e){t.setState({error:!0})})):f.a.get(a).then((function(a){var n=a.data.result.records,l=a.data.result.total;0===n.length&&alert("No schools matched this search");var c=n.map((function(e){return Object(d.a)({},e,{id:Object(p.v4)(),key:Object(p.v4)()})}));t.setState(Object(d.a)({},e,{schools:c,queried:!0,total:l}))})).catch((function(e){t.setState({error:!0})}))}},{key:"schoolDetailsHandler",value:function(e,t){this.setState({selectedSchoolId:e});for(var a=this.state.schools,n=0;n<a.length;n++)a[n].id===e&&this.setState(Object(d.a)({},t,{loadedSchool:a[n],detailsSelected:!0}))}},{key:"toggleDetails",value:function(e){this.setState(Object(d.a)({},e,{detailsSelected:!this.state.detailsSelected}))}},{key:"updateQuery",value:function(e,t){this.setState(Object(d.a)({},t,{query:e}))}},{key:"onToggleQuery",value:function(e){this.setState(Object(d.a)({},e,{exceedance:!this.state.exceedance}))}},{key:"handleYearFilter",value:function(e,t){this.setState(Object(d.a)({},t,{query3:e.target.value}))}},{key:"toggleSearch",value:function(e){this.setState(Object(d.a)({},e,{queried:!this.state.queried}))}},{key:"toggleMap",value:function(e){this.setState(Object(d.a)({},e,{map:!this.state.map}))}},{key:"startSearch",value:function(e){this.setState(Object(d.a)({},e,{beginSearch:!this.state.beginSearch}))}},{key:"render",value:function(){var e=this,t=this.state.exceedance?w.toggleOn:w.toggleOff,a=this.state.exceedance?w.toggleOff:w.toggleOn,n=this.state.exceedance?"Only show schools with an exceedance":"Search all schools",c=l.a.createElement("div",{className:w.detailBox},l.a.createElement(y,{id:this.state.selectedSchoolId,loadedSchool:this.state.loadedSchool,closeDetails:function(t){return e.toggleDetails(t)}})),r=l.a.createElement("div",{className:w.previewBox},l.a.createElement("h4",{className:w.clickExpand},"Click the down arrow for school sample details:"),l.a.createElement("p",{className:w.clickExpand},"Schools matching search:"," ",l.a.createElement("span",{className:w.total},this.state.total)),l.a.createElement(E,{error:this.state.error,schools:this.state.schools,selectedSchoolId:this.state.selectedSchoolId,onSchoolSelect:function(t){return e.schoolDetailsHandler(t)},loadedSchool:this.state.loadedSchool,queried:this.state.queried,toggleDetails:this.state.detailsSelected})),s=l.a.createElement("div",null,l.a.createElement("div",{className:w.searchHeader},l.a.createElement("h3",null,"Search by school name and/or county."),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6"},l.a.createElement("h5",null,"Filter search by year and/or exceedance.")),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("h5",null,"Your search will return a result for each sample taken that matches the search criteria."))),l.a.createElement("p",null,"Most schools will have several results and results with no exceedance (lead less than 15ppb) will look the same, with lead = 5ppb.")),l.a.createElement("div",{className:"footer"},l.a.createElement("div",{className:"card white"},l.a.createElement("div",{className:"card-content grey-text"},l.a.createElement("span",{className:"card-title"},n),l.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.queryHandler(e.state.query1,e.state.query2)}},l.a.createElement("div",{className:w.select},l.a.createElement("label",null,"Filter by year: "),l.a.createElement("select",{className:"browser-default",value:this.state.query3,onChange:function(t){return e.handleYearFilter(t)}},l.a.createElement("option",{value:""},"ALL YEARS"),l.a.createElement("option",{value:"2017"},"2017"),l.a.createElement("option",{value:"2018"},"2018"),l.a.createElement("option",{value:"2019"},"2019"))),l.a.createElement("div",null,l.a.createElement("input",{type:"text",placeholder:"Search...",value:this.state.query1,onChange:function(t){return e.setState({query1:t.target.value})}}),l.a.createElement("label",null,"Enter school name"),l.a.createElement("input",{type:"text",placeholder:"Search...",value:this.state.query2,onChange:function(t){return e.setState({query2:t.target.value})}}),l.a.createElement("label",null,"Enter county")),l.a.createElement("div",{className:"card-action"},l.a.createElement("label",null,l.a.createElement("span",{className:"exceedanceToggle"},"Filter by exceedance:"," "),l.a.createElement("span",{onClick:function(t){return e.onToggleQuery(t)},className:t},"On"),l.a.createElement("span",{onClick:function(t){return e.onToggleQuery(t)},className:a},"Off")),l.a.createElement("button",{id:"search",className:"btn waves-effect waves-light green",type:"submit"},l.a.createElement("i",{className:"large material-icons prefix"},"search")))),l.a.createElement("label",null,l.a.createElement("h6",{className:w.searchFooter},"Systems compare sample results from homes to EPA\u2019s action level of 0.015 mg/L (15 ppb). Exceeding the action level is not a violation. Violations can be assessed if a system does not perform certain required actions (e.g., public education or lead service line replacement) after the action level is exceeded. Other violations may also be assessed under the rule. For example, if samples are collected improperly, samples are not reported, or if treatment is done incorrectly.")),l.a.createElement("label",null," -The EPA Lead and Copper rule")))));return this.state.beginSearch?!this.state.queried&&this.state.beginSearch?l.a.createElement("div",null,l.a.createElement(D,{startSearch:function(t){return e.startSearch(t)},searchStatus:this.state.beginSearch}),s):this.state.queried&&!this.state.detailsSelected?l.a.createElement("div",{className:w.display},l.a.createElement(D,{startSearch:function(t){return e.startSearch(t)}}),l.a.createElement("button",{id:"searchToggle",className:"waves-effect waves-dark btn-small   blue-grey",type:"click",onClick:function(t){return e.toggleSearch(t)}},"New Search"),r):l.a.createElement("div",{className:w.display},l.a.createElement(D,{startSearch:function(t){return e.startSearch(t)},searchStatus:this.state.beginSearch}),l.a.createElement("button",{id:"searchToggle",className:"waves-effect waves-dark btn-small   blue-grey",type:"click",onClick:function(t){return e.toggleSearch(t)}},"New Search"),r,c):l.a.createElement("div",null,l.a.createElement(D,{startSearch:function(t){return e.startSearch(t)},searchStatus:this.state.beginSearch}),l.a.createElement(O,{seeMap:function(t){return e.toggleMap(t)},mapViewStatus:this.state.map,startSearch:function(t){return e.startSearch(t)}}))}}]),t}(n.Component),T=(a(57),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={startSearch:!1},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"App"},l.a.createElement("div",{className:"sliding-background"}),l.a.createElement("div",{className:"search container"},l.a.createElement(F,null)))}}]),t}(l.a.Component)),M=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function A(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}f.a.interceptors.request.use((function(e){return console.log(e),e}),(function(e){return console.log(e),Promise.reject(e)})),f.a.interceptors.response.use((function(e){return console.log(e),e}),(function(e){return console.log(e),Promise.reject(e)})),r.a.render(l.a.createElement(T,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/Factsolotl",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/Factsolotl","/service-worker.js");M?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):A(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):A(e)}))}}()}},[[31,1,2]]]);
//# sourceMappingURL=main.d3fe5f93.chunk.js.map