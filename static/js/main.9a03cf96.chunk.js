(this.webpackJsonpfactsolotl=this.webpackJsonpfactsolotl||[]).push([[0],{11:function(e,t,a){e.exports={leftLogo:"Logo_leftLogo__yKmfW",header:"Logo_header__1wXHb"}},24:function(e,t,a){e.exports={list:"List_list__2JTWI",redBG:"List_redBG__3v7Jh",greenBG:"List_greenBG__1EYTT"}},25:function(e,t,a){},26:function(e,t,a){e.exports={startSearch:"Splash_startSearch__UmNSt"}},27:function(e,t,a){e.exports=a.p+"static/media/bubbleF.ecb67f7a.png"},28:function(e,t,a){e.exports=a.p+"static/media/pbdw.cb4189a5.pdf"},29:function(e,t,a){e.exports={nav:"navbar_nav__3IIWD"}},3:function(e,t,a){e.exports={toggleOn:"Search_toggleOn__2GMPh",input:"Search_input__3nUeW",toggleOff:"Search_toggleOff__3MPn4",select:"Search_select__1gg29",detailBox:"Search_detailBox__2C408",searchToggle:"Search_searchToggle__2sYVV"}},30:function(e,t,a){e.exports=a(57)},35:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(23),r=a.n(c),o=(a(35),a(5)),s=a(6),i=a(8),u=a(7),d=a(9),h=a(2),m=a(4),f=a.n(m),g=a(10),v=(a(55),function(e){var t;return"Yes"===e.exceedance?t="redBG pulse":"No"===e.exceedance&&(t="greenBG"),console.log(e.toggleDetails),l.a.createElement("div",{className:t},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"details"},l.a.createElement("h4",null,e.name),l.a.createElement("div",{className:"Info"},l.a.createElement("button",{onClick:e.clicked,id:"expand",className:"btn btn waves-effect waves-dark white"},l.a.createElement("i",{id:"chevron",className:"material-icons"},"expand_more")))))))}),p=a(24),E=function(e){var t=l.a.createElement("p",{style:{textAlign:"center"}},"Something went wrong!");return t=e.queried?e.schools.map((function(t){var a=e.exceedanceCheck?"redBG":"greenBG";return l.a.createElement("div",{className:a},l.a.createElement(v,{key:t.id,name:t.school_name,district:t.district,exceedance:t.action_level_exceedance,toggleDetails:t.toggleDetails,closeDetais:t.closeDetais,clicked:function(){return e.onSchoolSelect(t.id)}}))})):l.a.createElement("div",{className:"card"},l.a.createElement("h1",null,"search results")),l.a.createElement("div",{className:p.list},t)},b=a(25),y=function(e){var t=l.a.createElement("div",{className:"cardDetail"},l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-image"},l.a.createElement("h1",null,"school details"))));if(e.loadedSchool){var a=new Date(e.loadedSchool.sample_date),n=a.getFullYear(),c=a.getMonth()+1;t=l.a.createElement("div",{className:b.cardDetail},l.a.createElement("div",{className:"card"},l.a.createElement("button",{onClick:function(t){return e.closeDetails(t)},id:"closeBtn",className:"btn btn waves-effect waves-dark white"},l.a.createElement("i",{id:"close",className:"material-icons"},"close")),l.a.createElement("h4",null,e.loadedSchool.school_name),l.a.createElement("p",null,"School district: ",e.loadedSchool.district),l.a.createElement("p",null,"Exceedance: ",e.loadedSchool.action_level_exceedance),l.a.createElement("p",null,"Lead concentration: ",e.loadedSchool.result," ppb"),l.a.createElement("p",null,"Date sampled: ",c,"/",n),l.a.createElement("p",null,"Water system: ",e.loadedSchool.water_system_name)))}return t},S=a(3),w=a(26),_=a(27),N=a.n(_),x=a(11),k=function(){return l.a.createElement("div",{className:x.logo},l.a.createElement("a",{href:"https://www.scientificamerican.com/article/biologys-beloved-amphibian-the-axolotl-is-racing-toward-extinction1/",rel:"noopener noreferrer",target:"_blank"},l.a.createElement("img",{className:x.leftLogo,src:N.a,alt:"A pink cartoon axolotl"})))},q=a(28),O=a.n(q),j=function(e){return l.a.createElement("div",{className:w.splash},l.a.createElement(k,null),l.a.createElement("div",null,l.a.createElement("h5",null,"Factsolotl"),l.a.createElement("p",null,"Water quality fact finder")),l.a.createElement("p",null,"Use Factsolotl to search for lead results from tap water samples taken at public schools across California."),l.a.createElement("div",null,l.a.createElement("h1",null,"Dont't Panic")),l.a.createElement("p",null,"Stay informed."),l.a.createElement("iframe",{title:"dwFacts",src:O.a,width:"100%",height:"400px"}),l.a.createElement("button",{id:"startSearch",type:"click",className:"btn",onClick:function(t){return e.startSearch(t)}},"Begin Search"))},D=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={schools:[],selectedschoolId:"",error:!1,loadedSchool:null,query1:"",query2:"",query3:"",exceedance:!1,exceedanceCheck:!1,queried:!1,detailsSelected:!1,total:0,beginSearch:!1},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"queryHandler",value:function(e,t,a){var n=this;this.setState(Object(h.a)({},a,{query1:e,qeury2:t}));var l="https://data.ca.gov/api/3/action/datastore_search?resource_id=5ebb2d68-1186-4937-acaf-8564c9a01ed6&q="+this.state.query1+", "+this.state.query2+", "+this.state.query3+", yes";""===this.state.query1&&""===this.state.query2&&""===this.state.query3?alert("Please enter a query."):this.state.exceedance?f.a.get(l).then((function(e){var t=e.data.result.records,l=e.data.result.total;0===t.length&&alert("No schools matched this search");var c=t.map((function(e){return Object(h.a)({},e,{id:Object(g.v4)()})}));n.setState(Object(h.a)({},a,{schools:c,queried:!0,total:l}))})).catch((function(e){n.setState({error:!0})})):f.a.get("https://data.ca.gov/api/3/action/datastore_search?resource_id=5ebb2d68-1186-4937-acaf-8564c9a01ed6&q="+this.state.query1+", "+this.state.query2+", "+this.state.query3).then((function(e){var t=e.data.result.records,l=e.data.result.total;0===t.length&&alert("No schools matched this search");var c=t.map((function(e){return Object(h.a)({},e,{id:Object(g.v4)()})}));n.setState(Object(h.a)({},a,{schools:c,schoolQuery:!0,queried:!0,total:l}))})).catch((function(e){n.setState({error:!0})}))}},{key:"schoolDetailsHandler",value:function(e,t){this.setState({selectedSchoolId:e});for(var a=this.state.schools,n=0;n<a.length;n++)a[n].id===e&&this.setState(Object(h.a)({},t,{loadedSchool:a[n],detailsSelected:!0}))}},{key:"toggleDetails",value:function(e){this.setState(Object(h.a)({},e,{detailsSelected:!this.state.detailsSelected}))}},{key:"updateQuery",value:function(e,t){this.setState(Object(h.a)({},t,{query:e}))}},{key:"onToggleQuery",value:function(e){this.setState(Object(h.a)({},e,{exceedance:!this.state.exceedance}))}},{key:"handleYearFilter",value:function(e,t){this.setState(Object(h.a)({},t,{query3:e.target.value}))}},{key:"toggleSearch",value:function(e){this.setState(Object(h.a)({},e,{queried:!this.state.queried}))}},{key:"startSearch",value:function(e){this.setState(Object(h.a)({},e,{beginSearch:!0}))}},{key:"render",value:function(){var e=this,t=this.state.exceedance?S.toggleOn:S.toggleOff,a=this.state.exceedance?S.toggleOff:S.toggleOn,n=this.state.exceedance?"Only show schools with an exceedance":"Search all schools",c=l.a.createElement("div",{className:S.detailBox},l.a.createElement(y,{id:this.state.selectedSchoolId,loadedSchool:this.state.loadedSchool,closeDetails:function(t){return e.toggleDetails(t)}})),r=l.a.createElement("div",null,l.a.createElement("label",null,"Schools matching search: ",this.state.total),l.a.createElement(E,{error:this.state.error,schools:this.state.schools,selectedSchoolId:this.state.selectedSchoolId,onSchoolSelect:function(t){return e.schoolDetailsHandler(t)},loadedSchool:this.state.loadedSchool,queried:this.state.queried,toggleDetails:this.state.detailsSelected})),o=l.a.createElement("div",null,l.a.createElement("p",null,"Systems compare sample results from homes to EPA\u2019s action level of Exceeding the action level is not a violation. Violations can be assessed if a system does not perform certain required actions (e.g., public education or lead service line replacement) after the action level is exceeded. Other violations may also be assessed under the rule. For example, if samples are collected improperly, samples are not reported, or if treatment is done incorrectly."),l.a.createElement("div",{className:"footer"},l.a.createElement("div",{className:"card white"},l.a.createElement("div",{className:"card-content grey-text"},l.a.createElement("span",{className:"card-title"},n),l.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.queryHandler(e.state.query1,e.state.query2)}},l.a.createElement("div",{className:S.select},l.a.createElement("label",null,"Filter by year: "),l.a.createElement("select",{className:"browser-default",value:this.state.query3,onChange:function(t){return e.handleYearFilter(t)}},l.a.createElement("option",{value:""},"ALL YEARS"),l.a.createElement("option",{value:"2017"},"2017"),l.a.createElement("option",{value:"2018"},"2018"),l.a.createElement("option",{value:"2019"},"2019"))),l.a.createElement("div",null,l.a.createElement("input",{type:"text",placeholder:"Search...",value:this.state.query1,onChange:function(t){return e.setState({query1:t.target.value})}}),l.a.createElement("label",null,"Enter school name"),l.a.createElement("input",{type:"text",placeholder:"Search...",value:this.state.query2,onChange:function(t){return e.setState({query2:t.target.value})}}),l.a.createElement("label",null,"Enter county")),l.a.createElement("div",{className:"card-action"},l.a.createElement("label",null,l.a.createElement("span",{className:"exceedanceToggle"},"Filter by exceedance:"," "),l.a.createElement("span",{onClick:function(t){return e.onToggleQuery(t)},className:t},"On"),l.a.createElement("span",{onClick:function(t){return e.onToggleQuery(t)},className:a},"Off")),l.a.createElement("button",{id:"search",className:"btn waves-effect waves-light green",type:"submit"},l.a.createElement("i",{className:"large material-icons prefix"},"search"))))))));return this.state.beginSearch?this.state.queried?this.state.queried&&!this.state.detailsSelected?l.a.createElement("div",{className:S.display},l.a.createElement(k,null),l.a.createElement("button",{id:"searchToggle",className:"waves-effect waves-dark btn-small   blue-grey",type:"click",onClick:function(t){return e.toggleSearch(t)}},"New Search"),r):l.a.createElement("div",{className:S.display},l.a.createElement(k,null),l.a.createElement("button",{id:"searchToggle",className:"waves-effect waves-dark btn-small   blue-grey",type:"click",onClick:function(t){return e.toggleSearch(t)}},"New Search"),r,c):l.a.createElement("div",null,l.a.createElement(k,null),o):l.a.createElement("div",null,l.a.createElement(j,{startSearch:function(t){return e.startSearch(t)}}))}}]),t}(n.Component),C=(a(29),a(56),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={startSearch:!1},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"App container"},l.a.createElement("div",{className:"search"},l.a.createElement(D,null)),l.a.createElement("div",{className:"sliding-background"}))}}]),t}(l.a.Component)),B=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function L(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}f.a.interceptors.request.use((function(e){return console.log(e),e}),(function(e){return console.log(e),Promise.reject(e)})),f.a.interceptors.response.use((function(e){return console.log(e),e}),(function(e){return console.log(e),Promise.reject(e)})),r.a.render(l.a.createElement(C,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/Factsolotl",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/Factsolotl","/service-worker.js");B?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):L(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):L(e)}))}}()}},[[30,1,2]]]);
//# sourceMappingURL=main.9a03cf96.chunk.js.map